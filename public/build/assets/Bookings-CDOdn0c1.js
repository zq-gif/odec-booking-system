import{r,u as f,j as e,H as D}from"./app-iYoIkR1E.js";import{A as B,c as L,F as M,a as U}from"./AuthenticatedLayout-DInRMzxB.js";import{F as H}from"./MagnifyingGlassIcon-BfN632wt.js";import{F as E}from"./FunnelIcon-CDT86Y8l.js";import{F as P}from"./UserIcon-D8eJsHTr.js";import{F as y}from"./CalendarIcon-CORJ47ji.js";import{F as j}from"./CheckCircleIcon-BM9RzH6c.js";import{F as V}from"./XCircleIcon-c6bhiM2D.js";import{F as q}from"./TrashIcon-DQkw_R61.js";import"./Footer-Si0AIl-y.js";import"./MapPinIcon-DiDavvRO.js";function O({title:c,titleId:l,...i},x){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:x,"aria-labelledby":l},i),c?r.createElement("title",{id:l},c):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const N=r.forwardRef(O);function ee({auth:c,bookings:l}){const[i,x]=r.useState(""),[d,w]=r.useState("all"),[o,v]=r.useState("all"),[t,b]=r.useState(null),[C,m]=r.useState(!1),n=f({type:"",status:""}),u=f({}),p=(s,a)=>{n.setData({type:s.type,status:a}),n.put(route("admin.bookings.update",s.id),{onSuccess:()=>{n.reset()}})},_=s=>{confirm(`Are you sure you want to delete this booking (${s.reference_number})?`)&&u.delete(route("admin.bookings.destroy",{id:s.id,type:s.type}))},F=s=>{b({receiptUrl:s.payment_receipt,bookingRef:s.reference_number,userName:s.user_name,amount:s.total_amount,paymentMethod:s.payment_method}),m(!0)},R=s=>{const a={pending:"bg-yellow-100 text-yellow-800",confirmed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800",completed:"bg-blue-100 text-blue-800"};return a[s]||a.pending},S=s=>{const a={facility:"bg-blue-100 text-blue-800",activity:"bg-purple-100 text-purple-800"};return a[s]||a.facility},h=l.filter(s=>{const a=s.reference_number.toLowerCase().includes(i.toLowerCase())||s.user_name.toLowerCase().includes(i.toLowerCase())||s.item_name.toLowerCase().includes(i.toLowerCase()),T=d==="all"||s.type===d,A=o==="all"||s.status===o;return a&&T&&A}),$=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),g=s=>s?new Date(`2000-01-01T${s}`).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"";return e.jsxs(B,{user:c.user,children:[e.jsx(D,{title:"Manage Bookings"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Manage Bookings"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"View and manage all facility and activity bookings"})]}),e.jsxs("div",{className:"mb-6 space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(H,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",placeholder:"Search by reference, user, or item name...",value:i,onChange:s=>x(s.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-5 w-5 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Filters:"})]}),e.jsxs("select",{value:d,onChange:s=>w(s.target.value),className:"px-3 py-1.5 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"facility",children:"Facilities"}),e.jsx("option",{value:"activity",children:"Activities"})]}),e.jsxs("select",{value:o,onChange:s=>v(s.target.value),className:"px-3 py-1.5 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Statuses"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"confirmed",children:"Confirmed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"}),e.jsx("option",{value:"completed",children:"Completed"})]})]})]}),e.jsxs("div",{className:"mb-6 grid grid-cols-1 gap-4 sm:grid-cols-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Bookings"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.length})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-yellow-800",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-900",children:l.filter(s=>s.status==="pending").length})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-green-800",children:"Confirmed"}),e.jsx("p",{className:"text-2xl font-bold text-green-900",children:l.filter(s=>s.status==="confirmed").length})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-blue-800",children:"Completed"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:l.filter(s=>s.status==="completed").length})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Booking Details"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date & Time"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Details"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[s.type==="facility"?e.jsx(L,{className:"h-10 w-10 text-blue-500"}):e.jsx(M,{className:"h-10 w-10 text-purple-500"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.item_name}),e.jsx("div",{className:"text-sm text-gray-500",children:s.reference_number}),e.jsx("span",{className:`inline-flex mt-1 px-2 py-0.5 text-xs font-semibold rounded-full ${S(s.type)}`,children:s.type})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(P,{className:"h-5 w-5 text-gray-400 mr-2"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.user_name}),e.jsx("div",{className:"text-sm text-gray-500",children:s.user_email})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(y,{className:"h-5 w-5 text-gray-400 mr-2 mt-0.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-900",children:$(s.booking_date)}),s.start_time&&e.jsxs("div",{className:"text-sm text-gray-500",children:[g(s.start_time)," - ",g(s.end_time)]})]})]})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm text-gray-900",children:s.type==="facility"?e.jsxs("span",{children:[s.number_of_guests," guests"]}):e.jsxs("span",{children:[s.number_of_participants," participants"]})}),s.special_requests&&e.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[e.jsx("span",{className:"font-medium",children:"Note: "}),s.special_requests.substring(0,50),s.special_requests.length>50&&"..."]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:["$",s.total_amount]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${R(s.status)}`,children:s.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.payment_receipt&&e.jsxs("button",{onClick:()=>F(s),className:"inline-flex items-center px-3 py-1.5 bg-purple-600 text-white rounded-lg hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 transition",title:"View payment receipt",children:[e.jsx(N,{className:"h-4 w-4 mr-1"}),"Receipt"]}),s.status==="pending"&&e.jsxs("button",{onClick:()=>p(s,"confirmed"),disabled:n.processing,className:"inline-flex items-center px-3 py-1.5 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition disabled:opacity-50",title:"Confirm booking",children:[e.jsx(j,{className:"h-4 w-4 mr-1"}),"Accept"]}),s.status==="confirmed"&&e.jsxs("button",{onClick:()=>p(s,"completed"),disabled:n.processing,className:"inline-flex items-center px-3 py-1.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition disabled:opacity-50",title:"Mark as completed",children:[e.jsx(j,{className:"h-4 w-4 mr-1"}),"Complete"]}),(s.status==="pending"||s.status==="confirmed")&&e.jsxs("button",{onClick:()=>p(s,"cancelled"),disabled:n.processing,className:"inline-flex items-center px-3 py-1.5 bg-red-600 text-white rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition disabled:opacity-50",title:"Cancel booking",children:[e.jsx(V,{className:"h-4 w-4 mr-1"}),"Cancel"]}),e.jsx("button",{onClick:()=>_(s),disabled:u.processing,className:"inline-flex items-center px-3 py-1.5 bg-gray-600 text-white rounded-lg hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition disabled:opacity-50",title:"Delete booking",children:e.jsx(q,{className:"h-4 w-4"})})]})})]},`${s.type}-${s.id}`))})]})}),h.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(y,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-semibold text-gray-900",children:"No bookings found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:i||d!=="all"||o!=="all"?"Try adjusting your search or filters.":"No bookings have been made yet."})]})]})})})}),C&&t&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:()=>m(!1)}),e.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full",children:[e.jsx("div",{className:"bg-purple-600 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(N,{className:"h-6 w-6 text-white mr-2"}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Payment Receipt"})]}),e.jsx("button",{onClick:()=>m(!1),className:"text-white hover:text-gray-200 transition",children:e.jsx(U,{className:"h-6 w-6"})})]})}),e.jsxs("div",{className:"px-6 py-6",children:[e.jsx("div",{className:"mb-4 p-4 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Booking Reference"}),e.jsx("p",{className:"font-semibold text-gray-900",children:t.bookingRef})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Customer"}),e.jsx("p",{className:"font-semibold text-gray-900",children:t.userName})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Payment Method"}),e.jsx("p",{className:"font-semibold text-gray-900",children:t.paymentMethod==="cash"?"Cash on Arrival (10% Deposit)":"Bank Transfer"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Total Amount"}),e.jsxs("p",{className:"font-semibold text-gray-900",children:["$",t.amount]})]})]})}),e.jsxs("div",{className:"border-2 border-gray-200 rounded-lg p-4 bg-white",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"Receipt Image"}),t.receiptUrl?e.jsx("img",{src:`/storage/${t.receiptUrl}`,alt:"Payment Receipt",className:"max-w-full h-auto mx-auto rounded shadow-lg",style:{maxHeight:"500px"}}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No receipt uploaded"})]})]}),e.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>m(!1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition",children:"Close"}),t.receiptUrl&&e.jsx("a",{href:`/storage/${t.receiptUrl}`,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition",children:"Open in New Tab"})]})]})]})})]})}export{ee as default};
