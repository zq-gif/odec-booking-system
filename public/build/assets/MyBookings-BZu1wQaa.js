import{r as d,j as e,H as A}from"./app-BJQngx_W.js";import{A as _,n as $}from"./AuthenticatedLayout-B09mpbgj.js";import{F as h}from"./CalendarIcon-CH9x5dg0.js";import{F as i}from"./ClockIcon-Bfn7eBnj.js";import{F as C}from"./MapPinIcon-DfsKNBer.js";import{F as p}from"./UserIcon-C6H7wlPF.js";import{a as B,F as R}from"./PhoneIcon-D4DV7h-y.js";import{F as S}from"./XCircleIcon-9QPC_p1Z.js";import{F as j}from"./CheckCircleIcon-C0UsWGn7.js";function V({auth:c,bookings:g}){const[a,y]=d.useState("All"),[t,m]=d.useState(null),[x,f]=d.useState({}),n=(g||[]).map(s=>({id:s.id,type:s.type||"facility",reference:s.reference_number,facility:s.item_name,date:new Date(s.booking_date).toLocaleDateString(),time:s.start_time&&s.end_time?`${s.start_time} - ${s.end_time}`:"All Day",status:s.status,image:s.item_image||"https://images.unsplash.com/photo-1559827260-dc66d52bef19?w=800&auto=format&fit=crop",contactName:c.user.name,phone:s.phone_number||"N/A",email:c.user.email,purpose:s.type==="activity"?"Activity Booking":s.purpose||"N/A",attendees:s.type==="activity"?s.number_of_participants||"N/A":s.number_of_guests||"N/A",bookedOn:new Date(s.created_at).toLocaleDateString(),totalAmount:parseFloat(s.total_amount)})),N=["All","Confirmed","Pending","Completed","Cancelled"],u=a==="All"?n:n.filter(s=>s.status===a.toLowerCase()),b=s=>{f(r=>({...r,[s]:!r[s]}))},v=s=>{m(s)},w=()=>{m(null)},o=s=>{const l={confirmed:{color:"bg-green-100 text-green-800",icon:j,text:"Confirmed"},completed:{color:"bg-blue-100 text-blue-800",icon:j,text:"Completed"},pending:{color:"bg-yellow-100 text-yellow-800",icon:i,text:"Pending"},cancelled:{color:"bg-red-100 text-red-800",icon:S,text:"Cancelled"}}[s],F=l.icon;return e.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${l.color}`,children:[e.jsx(F,{className:"h-4 w-4 mr-1"}),l.text]})};return e.jsxs(_,{children:[e.jsx(A,{title:"My Bookings"}),e.jsx("div",{className:"py-8",children:e.jsxs("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"My Bookings"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"View and manage your facility reservations"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-sm text-gray-700 mb-3",children:"Filter by status:"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:N.map(s=>e.jsx("button",{onClick:()=>y(s),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${a===s?"bg-blue-600 text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"}`,children:s},s))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Past Bookings"}),e.jsx("div",{className:"space-y-4",children:u.map(s=>e.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"flex items-center p-4",children:[e.jsx("img",{src:s.image,alt:s.facility,className:"w-20 h-20 rounded-lg object-cover"}),e.jsxs("div",{className:"flex-1 ml-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.facility}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600 mt-1",children:[e.jsx(h,{className:"h-4 w-4 mr-1"}),e.jsx("span",{className:"mr-4",children:s.date}),e.jsx(i,{className:"h-4 w-4 mr-1"}),e.jsx("span",{children:s.time})]})]}),e.jsxs("div",{className:"text-right mr-4",children:[o(s.status),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Ref: ",s.reference]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("button",{onClick:()=>b(s.id),className:"flex items-center text-sm text-gray-600 hover:text-gray-900",children:[e.jsx($,{className:`h-4 w-4 mr-1 transition-transform ${x[s.id]?"rotate-180":""}`}),"Show Details"]}),e.jsx("button",{onClick:()=>v(s),className:"px-4 py-1.5 text-sm text-gray-700 border border-gray-300 rounded hover:bg-gray-50",children:"View"}),s.status==="completed"&&e.jsx("button",{className:"px-4 py-1.5 text-sm text-blue-600 border border-blue-600 rounded hover:bg-blue-50",children:"Leave Feedback"})]})]}),x[s.id]&&e.jsx("div",{className:"px-4 pb-4 pt-2 bg-gray-50 border-t border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Purpose"}),e.jsx("p",{className:"font-medium text-gray-900",children:s.purpose})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Attendees"}),e.jsx("p",{className:"font-medium text-gray-900",children:s.attendees})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Payment Method"}),e.jsx("p",{className:"font-medium text-gray-900",children:s.paymentMethod})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Total Amount"}),e.jsxs("p",{className:"font-medium text-gray-900",children:["$",s.totalAmount]})]})]})})]},s.id))})]})]})}),t&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[e.jsx("div",{children:o(t.status)}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Reference"}),e.jsx("p",{className:"font-semibold text-gray-900",children:t.reference})]})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:t.facility}),e.jsx("img",{src:t.image,alt:t.facility,className:"w-full h-48 object-cover rounded-lg mb-6"}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx(h,{className:"h-5 w-5 text-gray-400 mr-3 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Date"}),e.jsx("p",{className:"font-medium text-gray-900",children:t.date})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx(i,{className:"h-5 w-5 text-gray-400 mr-3 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Time"}),e.jsx("p",{className:"font-medium text-gray-900",children:t.time})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx(C,{className:"h-5 w-5 text-gray-400 mr-3 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Facility"}),e.jsx("p",{className:"font-medium text-gray-900",children:t.facility})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx(p,{className:"h-5 w-5 text-gray-400 mr-3 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Purpose"}),e.jsx("p",{className:"font-medium text-gray-900",children:t.purpose})]})]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-6 mb-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Contact Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx(p,{className:"h-5 w-5 text-gray-400 mr-3 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Name"}),e.jsx("p",{className:"font-medium text-gray-900",children:t.contactName})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx(B,{className:"h-5 w-5 text-gray-400 mr-3 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Phone"}),e.jsx("p",{className:"font-medium text-gray-900",children:t.phone})]})]}),e.jsxs("div",{className:"flex items-start col-span-2",children:[e.jsx(R,{className:"h-5 w-5 text-gray-400 mr-3 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Email"}),e.jsx("p",{className:"font-medium text-gray-900",children:t.email})]})]})]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-6 mb-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Additional Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Number of Attendees"}),e.jsx("p",{className:"font-medium text-gray-900",children:t.attendees})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Booked On"}),e.jsx("p",{className:"font-medium text-gray-900",children:t.bookedOn})]})]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Payment Information"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"Total Amount"}),e.jsxs("p",{className:"text-xl font-bold text-gray-900",children:["$",t.totalAmount]})]})]})]}),e.jsxs("div",{className:"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4 flex justify-end gap-3",children:[e.jsx("button",{onClick:w,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 font-medium",children:"Close"}),t.status==="confirmed"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 font-medium",children:"Modify Booking"}),e.jsx("button",{className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 font-medium",children:"Cancel Booking"})]})]})]})})]})}export{V as default};
