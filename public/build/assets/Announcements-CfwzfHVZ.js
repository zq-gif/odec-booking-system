import{r,u as g,j as e,H as R,a as j}from"./app-BJQngx_W.js";import{A as E,b as T,a as b}from"./AuthenticatedLayout-B09mpbgj.js";import{F as L}from"./PlusIcon-DDOG2yN8.js";import{F as P}from"./MagnifyingGlassIcon-BKIkyzPy.js";import{F as U}from"./ClockIcon-Bfn7eBnj.js";import{F as q}from"./PencilIcon-BfkyAza9.js";import{F as O}from"./TrashIcon-CloROCIa.js";import{F as f}from"./PhotoIcon-CTBsegAF.js";import"./CalendarIcon-CH9x5dg0.js";function V({auth:y,announcements:N}){const[v,o]=r.useState(!1),[w,i]=r.useState(!1),[C,d]=r.useState(!1),[l,c]=r.useState(null),[n,k]=r.useState(""),[x,m]=r.useState("file"),[h,p]=r.useState("file"),s=g({title:"",message:"",photo:null,photo_url:"",is_active:!0,expires_at:""}),a=g({title:"",message:"",photo:null,photo_url:"",is_active:!0,expires_at:""}),u=N.filter(t=>t.title.toLowerCase().includes(n.toLowerCase())||t.message.toLowerCase().includes(n.toLowerCase())),_=()=>{s.reset(),m("file"),o(!0)},D=t=>{c(t),a.setData({title:t.title,message:t.message,photo:null,photo_url:"",is_active:t.is_active,expires_at:t.expires_at?t.expires_at.split("T")[0]:""}),p("file"),i(!0)},S=t=>{c(t),d(!0)},A=t=>{t.preventDefault(),s.post(route("admin.announcements.store"),{onSuccess:()=>{o(!1),s.reset()}})},F=t=>{t.preventDefault(),a.patch(route("admin.announcements.update",l.id),{onSuccess:()=>{i(!1),a.reset()}})},M=()=>{j.delete(route("admin.announcements.destroy",l.id),{onSuccess:()=>{d(!1),c(null)}})},$=t=>{j.patch(route("admin.announcements.toggle",t.id))};return e.jsxs(E,{user:y.user,children:[e.jsx(R,{title:"Announcements Management"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden bg-white shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(T,{className:"mr-3 h-8 w-8 text-orange-600"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Announcements"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Manage system-wide announcements"})]})]}),e.jsxs("button",{onClick:_,className:"flex items-center rounded-lg bg-orange-600 px-4 py-2 text-white hover:bg-orange-700",children:[e.jsx(L,{className:"mr-2 h-5 w-5"}),"Create Announcement"]})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(P,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search announcements...",value:n,onChange:t=>k(t.target.value),className:"w-full rounded-lg border border-gray-300 py-2 pl-10 pr-4 focus:border-orange-500 focus:outline-none focus:ring-2 focus:ring-orange-500"})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Title"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Message"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Photo"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Expires"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:u.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:"No announcements found"})}):u.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.title}),e.jsxs("div",{className:"text-xs text-gray-500",children:["by ",t.creator?.name]})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"max-w-xs truncate text-sm text-gray-900",children:t.message})}),e.jsx("td",{className:"px-6 py-4",children:t.photo_path?e.jsx("img",{src:t.photo_path.startsWith("http")?t.photo_path:`/storage/${t.photo_path}`,alt:"Announcement",className:"h-12 w-12 rounded object-cover"}):e.jsx("span",{className:"text-xs text-gray-400",children:"No photo"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("button",{onClick:()=>$(t),className:`inline-flex rounded-full px-2 py-1 text-xs font-semibold ${t.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:t.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:t.expires_at?e.jsxs("div",{className:"flex items-center text-xs",children:[e.jsx(U,{className:"mr-1 h-4 w-4"}),new Date(t.expires_at).toLocaleDateString()]}):e.jsx("span",{className:"text-gray-400",children:"Never"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>D(t),className:"text-blue-600 hover:text-blue-900",children:e.jsx(q,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>S(t),className:"text-red-600 hover:text-red-900",children:e.jsx(O,{className:"h-5 w-5"})})]})})]},t.id))})]})})]})})})}),v&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"w-full max-w-2xl rounded-lg bg-white p-6",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Create Announcement"}),e.jsx("button",{onClick:()=>o(!1),children:e.jsx(b,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:A,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Title"}),e.jsx("input",{type:"text",value:s.data.title,onChange:t=>s.setData("title",t.target.value),className:"w-full rounded border px-3 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Message"}),e.jsx("textarea",{value:s.data.message,onChange:t=>s.setData("message",t.target.value),className:"w-full rounded border px-3 py-2",rows:"4",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Photo (Optional)"}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx("button",{type:"button",onClick:()=>{m("file"),s.setData("photo_url","")},className:`px-3 py-1 text-sm rounded-lg ${x==="file"?"bg-orange-600 text-white":"bg-gray-200 text-gray-700"}`,children:"Upload File"}),e.jsx("button",{type:"button",onClick:()=>{m("url"),s.setData("photo",null)},className:`px-3 py-1 text-sm rounded-lg ${x==="url"?"bg-orange-600 text-white":"bg-gray-200 text-gray-700"}`,children:"Image URL"})]}),x==="file"?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("label",{className:"flex cursor-pointer items-center gap-2 rounded-lg border-2 border-dashed border-gray-300 px-4 py-3 hover:border-orange-400",children:[e.jsx(f,{className:"h-6 w-6 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600",children:s.data.photo?s.data.photo.name:"Choose photo"}),e.jsx("input",{type:"file",accept:"image/*",onChange:t=>s.setData("photo",t.target.files[0]),className:"hidden"})]}),s.data.photo&&e.jsx("button",{type:"button",onClick:()=>s.setData("photo",null),className:"text-sm text-red-600 hover:text-red-800",children:"Remove"})]}):e.jsx("input",{type:"url",value:s.data.photo_url,onChange:t=>s.setData("photo_url",t.target.value),placeholder:"https://example.com/image.jpg",className:"w-full rounded border px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Expires At (Optional)"}),e.jsx("input",{type:"date",value:s.data.expires_at,onChange:t=>s.setData("expires_at",t.target.value),className:"w-full rounded border px-3 py-2"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:s.data.is_active,onChange:t=>s.setData("is_active",t.target.checked),className:"mr-2"}),e.jsx("label",{className:"text-sm font-medium",children:"Active"})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>o(!1),className:"rounded bg-gray-300 px-4 py-2 hover:bg-gray-400",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:s.processing,className:"rounded bg-orange-600 px-4 py-2 text-white hover:bg-orange-700",children:"Create"})]})]})]})}),w&&l&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"w-full max-w-2xl rounded-lg bg-white p-6",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Edit Announcement"}),e.jsx("button",{onClick:()=>i(!1),children:e.jsx(b,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:F,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Title"}),e.jsx("input",{type:"text",value:a.data.title,onChange:t=>a.setData("title",t.target.value),className:"w-full rounded border px-3 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Message"}),e.jsx("textarea",{value:a.data.message,onChange:t=>a.setData("message",t.target.value),className:"w-full rounded border px-3 py-2",rows:"4",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Photo (Optional)"}),l?.photo_path&&e.jsxs("div",{className:"mb-2",children:[e.jsx("img",{src:l.photo_path.startsWith("http")?l.photo_path:`/storage/${l.photo_path}`,alt:"Current",className:"h-24 w-24 rounded object-cover"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Current photo"})]}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx("button",{type:"button",onClick:()=>{p("file"),a.setData("photo_url","")},className:`px-3 py-1 text-sm rounded-lg ${h==="file"?"bg-orange-600 text-white":"bg-gray-200 text-gray-700"}`,children:"Upload File"}),e.jsx("button",{type:"button",onClick:()=>{p("url"),a.setData("photo",null)},className:`px-3 py-1 text-sm rounded-lg ${h==="url"?"bg-orange-600 text-white":"bg-gray-200 text-gray-700"}`,children:"Image URL"})]}),h==="file"?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("label",{className:"flex cursor-pointer items-center gap-2 rounded-lg border-2 border-dashed border-gray-300 px-4 py-3 hover:border-orange-400",children:[e.jsx(f,{className:"h-6 w-6 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600",children:a.data.photo?a.data.photo.name:"Choose new photo"}),e.jsx("input",{type:"file",accept:"image/*",onChange:t=>a.setData("photo",t.target.files[0]),className:"hidden"})]}),a.data.photo&&e.jsx("button",{type:"button",onClick:()=>a.setData("photo",null),className:"text-sm text-red-600 hover:text-red-800",children:"Remove"})]}):e.jsx("input",{type:"url",value:a.data.photo_url,onChange:t=>a.setData("photo_url",t.target.value),placeholder:"https://example.com/image.jpg",className:"w-full rounded border px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Expires At (Optional)"}),e.jsx("input",{type:"date",value:a.data.expires_at,onChange:t=>a.setData("expires_at",t.target.value),className:"w-full rounded border px-3 py-2"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:a.data.is_active,onChange:t=>a.setData("is_active",t.target.checked),className:"mr-2"}),e.jsx("label",{className:"text-sm font-medium",children:"Active"})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>i(!1),className:"rounded bg-gray-300 px-4 py-2 hover:bg-gray-400",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:a.processing,className:"rounded bg-orange-600 px-4 py-2 text-white hover:bg-orange-700",children:"Update"})]})]})]})}),C&&l&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"w-full max-w-md rounded-lg bg-white p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Delete Announcement"}),e.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:['Are you sure you want to delete "',l.title,'"? This action cannot be undone.']})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>d(!1),className:"rounded bg-gray-300 px-4 py-2 hover:bg-gray-400",children:"Cancel"}),e.jsx("button",{onClick:M,className:"rounded bg-red-600 px-4 py-2 text-white hover:bg-red-700",children:"Delete"})]})]})})]})}export{V as default};
