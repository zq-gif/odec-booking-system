import{r as d,j as e,d as H,H as ie}from"./app-CYJOzd3f.js";import{a as oe,A as ce,l as U,F as L,k as de}from"./AuthenticatedLayout-BFKvdMRu.js";import{F as me,a as xe,E as he,b as ue,c as pe}from"./EquipmentSelector-HSaJtRE_.js";import{F as W}from"./CalendarIcon-CtuZG1Zs.js";import{F as be}from"./EyeIcon-CBpGKCBW.js";import{F as fe}from"./SignalIcon-C62ZerLF.js";import{F as Y}from"./UserGroupIcon-COwazUt6.js";import{F as ge}from"./ClockIcon-DvJ4Qero.js";import{F as G}from"./CheckCircleIcon-YU_6fHCC.js";import"./LanguageSwitcher-5vOT-J5q.js";import"./MapPinIcon-CGbZXVav.js";import"./PlusIcon-B-hmZCSp.js";let I=null;function je({isOpen:v,onClose:M,imageUrl:i,activityName:r}){const h=d.useRef(null),o=d.useRef(null),[B,y]=d.useState(!0),[P,w]=d.useState(!1),[u,F]=d.useState(0);return d.useEffect(()=>{if(!v||!i)return;let m=!0;const T=async()=>{if(window.AFRAME){m&&k();return}if(I){try{await I,m&&k()}catch{m&&(w(!0),y(!1))}return}I=new Promise((n,p)=>{const b=document.createElement("script");b.src="https://aframe.io/releases/1.4.2/aframe.min.js",b.onload=()=>{n()},b.onerror=()=>{p(new Error("Failed to load A-Frame"))},document.head.appendChild(b)});try{await I,m&&k()}catch(n){console.error("Failed to load A-Frame:",n),m&&(w(!0),y(!1))}},k=()=>{if(!h.current||!m)return;y(!0),w(!1),F(0),o.current&&t();const n=setInterval(()=>{F(c=>c>=90?(clearInterval(n),90):c+10)},200),p=new Image,b=setTimeout(()=>{console.warn("Image taking too long to load")},1e4);p.onload=()=>{if(clearTimeout(b),clearInterval(n),F(100),!m||!h.current)return;const c=document.createElement("a-scene");c.setAttribute("embedded",""),c.setAttribute("vr-mode-ui","enabled: true"),c.setAttribute("loading-screen","enabled: false");const E=document.createElement("a-assets"),N=document.createElement("img");N.id="vr-image",N.src=i,N.crossOrigin="anonymous",N.setAttribute("data-loaded","true"),E.appendChild(N),c.appendChild(E);const C=document.createElement("a-sky");C.setAttribute("src","#vr-image"),C.setAttribute("rotation","0 0 0");const S=document.createElement("a-entity"),R=document.createElement("a-camera");R.setAttribute("look-controls","enabled: true"),R.setAttribute("wasd-controls","enabled: false"),S.appendChild(R),c.appendChild(C),c.appendChild(S),c.addEventListener("loaded",()=>{m&&setTimeout(()=>{y(!1)},300)}),h.current.appendChild(c),o.current=c},p.onerror=()=>{clearTimeout(b),console.error("Failed to load VR image:",i),m&&(w(!0),y(!1))},p.crossOrigin="anonymous",p.src=i},t=()=>{o.current&&h.current&&(o.current.pause&&o.current.pause(),o.current.removeEventListener("loaded",()=>{}),h.current.removeChild(o.current),o.current=null)};return T(),()=>{m=!1,t()}},[v,i]),v?e.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-95 backdrop-blur-sm transition-opacity",style:{zIndex:1}}),e.jsx("div",{className:"relative h-full flex items-center justify-center",children:e.jsxs("div",{className:"relative w-full h-full bg-black",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 bg-gradient-to-b from-black/90 to-transparent p-4 pointer-events-none",style:{zIndex:30},children:e.jsxs("div",{className:"flex items-center justify-between pointer-events-auto",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold text-white",children:[r," - 360¬∞ VR Tour"]}),e.jsx("p",{className:"text-sm text-gray-300 mt-1",children:"üñ±Ô∏è Drag to look around ‚Ä¢ Click VR button for immersive mode"})]}),e.jsx("button",{onClick:M,className:"p-2 rounded-full bg-white/10 hover:bg-white/20 text-white transition-all backdrop-blur-sm",title:"Close",children:e.jsx(oe,{className:"h-6 w-6"})})]})}),B&&!P&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",style:{zIndex:20},children:e.jsxs("div",{className:"text-center max-w-md px-6",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-white mb-4"}),e.jsx("p",{className:"text-white text-lg font-semibold",children:"Loading VR Tour..."}),e.jsx("p",{className:"text-gray-400 text-sm mt-2 mb-4",children:u<100?"Downloading 360¬∞ panoramic image...":"Initializing VR scene..."}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2.5 overflow-hidden",children:e.jsx("div",{className:"bg-blue-500 h-2.5 rounded-full transition-all duration-300 ease-out",style:{width:`${u}%`}})}),e.jsxs("p",{className:"text-gray-500 text-xs mt-2",children:[u,"%"]}),u>50&&u<100&&e.jsx("p",{className:"text-yellow-400 text-xs mt-3",children:"Large image file (~2MB) - please be patient"})]})}),P&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",style:{zIndex:20},children:e.jsxs("div",{className:"text-center px-4",children:[e.jsx("div",{className:"text-red-500 text-6xl mb-4",children:"‚ö†Ô∏è"}),e.jsx("p",{className:"text-white text-xl font-semibold mb-2",children:"Failed to Load VR Tour"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Please check your internet connection and try again."}),e.jsx("button",{onClick:M,className:"mt-6 px-6 py-3 bg-white/10 hover:bg-white/20 text-white rounded-lg transition-all",children:"Close"})]})}),e.jsx("div",{ref:h,className:"w-full h-full",style:{width:"100vw",height:"100vh",position:"absolute",top:0,left:0,zIndex:10,opacity:B?0:1,transition:"opacity 0.3s ease-in-out"}}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/90 to-transparent p-6 pointer-events-none",style:{zIndex:30},children:e.jsxs("div",{className:"flex items-center justify-center gap-8 text-white text-sm flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-white/20 flex items-center justify-center",children:"üñ±Ô∏è"}),e.jsx("span",{children:"Drag to look around 360¬∞"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-white/20 flex items-center justify-center",children:"üì±"}),e.jsx("span",{children:"Use VR headset for full immersion"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-white/20 flex items-center justify-center",children:"‚å®Ô∏è"}),e.jsx("span",{children:"Press ESC to exit"})]})]})})]})})]}):null}function Be({auth:v,activities:M,paymentQrCode:i}){const[r,h]=d.useState(1),[o,B]=d.useState(""),[y,P]=d.useState([]),[w,u]=d.useState(!1),[F,m]=d.useState(!1),[T,k]=d.useState(null),[t,n]=d.useState({activity:null,date:"",time:"",name:v.user.name,email:v.user.email,phone:"",participants:1,paymentMethod:"",receiptFile:null,equipment:[]}),p=s=>{if(!s)return 120;if(s.toLowerCase().includes("minute")){const x=s.match(/(\d+\.?\d*)/);return x?parseFloat(x[1]):120}if(s.toLowerCase().includes("hour")){const x=s.match(/(\d+\.?\d*)/);return x?parseFloat(x[1])*60:120}const a=s.match(/(\d+\.?\d*)/);return a?parseFloat(a[1])*60:120},c=(()=>{if(!t.activity)return[];const s=p(t.activity?.duration),a=[],x=8,l=18,g=x*60,_=l*60;for(let j=g;j+s<=_;j+=s){const V=Math.floor(j/60),O=j%60,q=j+s,Q=Math.floor(q/60),ee=q%60,se=`${V.toString().padStart(2,"0")}:${O.toString().padStart(2,"0")}`,te=`${Q.toString().padStart(2,"0")}:${ee.toString().padStart(2,"0")}`,ae=(($,z)=>{const re=$<12?"AM":"PM",ne=$===0?12:$>12?$-12:$,le=z>0?`:${z.toString().padStart(2,"0")}`:":00";return`${ne}${le} ${re}`})(V,O);a.push({value:se,label:ae,endTime:te,duration:s})}return a})();d.useEffect(()=>{t.activity&&t.date&&E()},[t.activity,t.date]);const E=async()=>{u(!0);try{console.log("Fetching booked slots for:",{activity_id:t.activity.id,date:t.date});const s=await H.get("/api/activity-bookings/booked-slots",{params:{activity_id:t.activity.id,date:t.date}});console.log("Booked slots received:",s.data),P(s.data)}catch(s){console.error("Error fetching booked slots:",s),console.error("Error response:",s.response?.data)}u(!1)},N=s=>y.some(a=>a.start_time===s+":00"||a.start_time===s),C=[{number:1,name:"Select Activity",icon:U},{number:2,name:"Choose Date & Time",icon:W},{number:3,name:"Enter Details",icon:U},{number:4,name:"Payment",icon:me},{number:5,name:"Confirmation",icon:xe}],S=()=>{r<5&&h(r+1)},R=()=>{r>1&&h(r-1)},J=s=>{n({...t,activity:s}),S()},A=()=>t.activity?.price_per_person?(parseFloat(t.activity.price_per_person)*t.participants).toFixed(2):0,f=()=>{const s=A();return(parseFloat(s)*.1).toFixed(2)},D=()=>{const s=A(),a=f();return(parseFloat(s)-parseFloat(a)).toFixed(2)},K=()=>{window.print()},Z=s=>{const a={easy:"bg-green-100 text-green-800",moderate:"bg-yellow-100 text-yellow-800",hard:"bg-red-100 text-red-800"};return a[s]||a.easy},X=async s=>{s.preventDefault();const x=c.find(l=>l.value===t.time)?.endTime||t.time;try{const l=new FormData;l.append("activity_id",t.activity.id),l.append("booking_date",t.date),l.append("start_time",t.time),l.append("end_time",x),l.append("number_of_participants",parseInt(t.participants)),l.append("phone_number",t.phone),l.append("payment_method",t.paymentMethod),t.equipment&&t.equipment.length>0&&t.equipment.forEach((_,j)=>{l.append(`equipment[${j}][id]`,_.id),l.append(`equipment[${j}][quantity]`,_.quantity)}),t.receiptFile&&l.append("payment_receipt",t.receiptFile);const g=await H.post("/api/activity-bookings",l,{headers:{"Content-Type":"multipart/form-data"}});console.log("Response data:",g.data),g.data.success?(B(g.data.reference_number),S()):alert(g.data.message||"Booking failed. Please try again.")}catch(l){if(console.error("Booking error:",l),l.response?.data?.errors){const g=Object.values(l.response.data.errors).flat().join(`
`);alert(`Validation errors:
`+g)}else alert("An error occurred while creating your booking. Please try again.")}};return e.jsxs(ce,{children:[e.jsx(ie,{title:"Book an Activity"}),e.jsx("div",{className:"py-8",children:e.jsxs("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Book an Activity"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Choose from our exciting beach and recreation activities"})]}),e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"flex items-center justify-between",children:C.map((s,a)=>e.jsxs("div",{className:"flex items-center flex-1",children:[e.jsxs("div",{className:"flex flex-col items-center flex-1",children:[e.jsx("div",{className:`flex items-center justify-center w-12 h-12 rounded-full border-2 ${r>=s.number?"bg-blue-600 border-blue-600":"bg-white border-gray-300"}`,children:e.jsx(s.icon,{className:`h-6 w-6 ${r>=s.number?"text-white":"text-gray-400"}`})}),e.jsx("p",{className:`mt-2 text-xs font-medium ${r>=s.number?"text-blue-600":"text-gray-500"}`,children:s.name})]}),a<C.length-1&&e.jsx("div",{className:`flex-1 h-0.5 mx-4 ${r>s.number?"bg-blue-600":"bg-gray-300"}`})]},s.number))})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[r===1&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Select an Activity"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:M.map(s=>e.jsxs("div",{className:`border border-gray-200 rounded-lg overflow-hidden hover:shadow-lg transition-shadow ${s.status!=="available"?"opacity-50":""}`,children:[e.jsxs("div",{className:"relative",children:[s.image?e.jsx("img",{src:s.image.startsWith("http")||s.image.startsWith("/storage/")?s.image:`/storage/${s.image}`,alt:s.name,className:"w-full h-48 object-cover"}):e.jsx("div",{className:"w-full h-48 bg-gradient-to-br from-blue-100 to-blue-200 flex items-center justify-center",children:e.jsx(L,{className:"h-20 w-20 text-blue-400"})}),s.vr_tour_image&&e.jsxs("button",{onClick:a=>{a.stopPropagation(),k(s),m(!0)},className:"absolute top-2 right-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white px-3 py-2 rounded-full shadow-lg hover:shadow-xl transition-all transform hover:scale-105 flex items-center gap-1 text-xs font-semibold",title:"View VR Tour",children:[e.jsx(be,{className:"h-4 w-4"}),"VR Tour"]})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.name}),e.jsxs("span",{className:"text-blue-600 font-bold",children:["$",s.price_per_person,"/person"]})]}),s.difficulty_level&&e.jsxs("span",{className:`inline-flex items-center px-2 py-1 text-xs font-semibold rounded-full mb-2 ${Z(s.difficulty_level)}`,children:[e.jsx(fe,{className:"h-3 w-3 mr-1"}),s.difficulty_level]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:s.description}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500 mb-3",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(Y,{className:"h-4 w-4 mr-1"}),"Capacity: ",s.capacity]}),s.duration&&e.jsxs("span",{className:"flex items-center",children:[e.jsx(ge,{className:"h-4 w-4 mr-1"}),s.duration]})]}),e.jsx("button",{onClick:()=>s.status==="available"&&J(s),className:`w-full py-2 rounded-lg ${s.status==="available"?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,disabled:s.status!=="available",children:s.status==="available"?"Select Activity":"Unavailable"})]})]},s.id))}),M.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(L,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-semibold text-gray-900",children:"No activities available"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Check back later for new activities."})]})]}),r===2&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Choose Date & Time"}),e.jsxs("div",{className:"max-w-md mx-auto space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Selected Activity"}),e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:t.activity?.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["$",t.activity?.price_per_person,"/person"]}),t.activity?.duration&&e.jsxs("p",{className:"text-sm text-gray-600",children:["Duration: ",t.activity?.duration]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),e.jsx("input",{type:"date",value:t.date,onChange:s=>n({...t,date:s.target.value,time:""}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",min:new Date().toISOString().split("T")[0]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Time Slot"}),w?e.jsx("div",{className:"text-center py-4 text-gray-500",children:"Loading available slots..."}):t.date?e.jsx("div",{className:"grid grid-cols-2 gap-3",children:c.map(s=>{const a=N(s.value),x=t.time===s.value;return e.jsxs("button",{type:"button",disabled:a,onClick:()=>!a&&n({...t,time:s.value}),className:`p-3 rounded-lg border-2 text-center transition-all ${a?"bg-red-100 border-red-300 text-red-500 cursor-not-allowed":x?"bg-blue-600 border-blue-600 text-white":"bg-green-50 border-green-300 text-green-700 hover:bg-green-100 cursor-pointer"}`,children:[e.jsx("div",{className:"font-semibold",children:s.label}),e.jsx("div",{className:"text-xs mt-1",children:a?"Booked":"Available"})]},s.value)})}):e.jsx("div",{className:"text-center py-4 text-gray-500",children:"Please select a date first"}),e.jsxs("div",{className:"flex gap-4 mt-3 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-3 h-3 bg-green-100 border border-green-300 rounded"}),e.jsx("span",{children:"Available"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-3 h-3 bg-red-100 border border-red-300 rounded"}),e.jsx("span",{children:"Booked"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-3 h-3 bg-blue-600 rounded"}),e.jsx("span",{children:"Selected"})]})]})]})]})]}),r===3&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Enter Booking Details"}),e.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name"}),e.jsx("input",{type:"text",value:t.name,onChange:s=>n({...t,name:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx("input",{type:"email",value:t.email,onChange:s=>n({...t,email:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),e.jsx("input",{type:"tel",value:t.phone,onChange:s=>n({...t,phone:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Number of Participants"}),e.jsx("input",{type:"number",value:t.participants,onChange:s=>n({...t,participants:s.target.value}),min:"1",max:t.activity?.capacity||100,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),e.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Maximum capacity: ",t.activity?.capacity," people"]})]})]}),e.jsx("div",{className:"border-t border-gray-200 pt-6",children:e.jsx(he,{selectedEquipment:t.equipment,onEquipmentChange:s=>n({...t,equipment:s})})})]})]}),r===4&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Payment"}),e.jsxs("div",{className:"max-w-md mx-auto space-y-6",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Booking Summary"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Activity:"}),e.jsx("span",{className:"font-medium",children:t.activity?.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Date:"}),e.jsx("span",{className:"font-medium",children:t.date})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Participants:"}),e.jsx("span",{className:"font-medium",children:t.participants})]}),t.activity?.duration&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Duration:"}),e.jsx("span",{className:"font-medium",children:t.activity?.duration})]}),e.jsxs("div",{className:"flex justify-between pt-2 border-t border-gray-300",children:[e.jsx("span",{className:"font-semibold",children:"Total Amount:"}),e.jsxs("span",{className:"font-bold text-blue-600",children:["$",A()]})]}),t.paymentMethod==="cash"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between text-sm pt-2",children:[e.jsx("span",{className:"text-amber-700",children:"Deposit Required (10%):"}),e.jsxs("span",{className:"font-semibold text-amber-700",children:["$",f()]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Pay on Arrival:"}),e.jsxs("span",{className:"font-medium text-gray-600",children:["$",D()]})]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Method"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center p-4 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsx("input",{type:"radio",name:"payment",value:"cash",checked:t.paymentMethod==="cash",onChange:s=>n({...t,paymentMethod:s.target.value}),className:"mr-3"}),e.jsx("span",{children:"Cash on Arrival"})]}),e.jsxs("label",{className:"flex items-center p-4 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsx("input",{type:"radio",name:"payment",value:"bank_transfer",checked:t.paymentMethod==="bank_transfer",onChange:s=>n({...t,paymentMethod:s.target.value}),className:"mr-3"}),e.jsx("span",{children:"Bank Transfer"})]})]})]}),(t.paymentMethod==="cash"||t.paymentMethod==="bank_transfer")&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Upload Payment Receipt ",e.jsx("span",{className:"text-red-600",children:"*"}),e.jsx("span",{className:"text-amber-600 ml-1",children:"(10% Deposit Receipt Required)"})]}),e.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-lg hover:border-blue-400 transition-colors",children:e.jsxs("div",{className:"space-y-1 text-center",children:[e.jsx(ue,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsxs("div",{className:"flex text-sm text-gray-600",children:[e.jsxs("label",{htmlFor:"receipt-upload",className:"relative cursor-pointer bg-white rounded-md font-medium text-blue-600 hover:text-blue-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-blue-500",children:[e.jsx("span",{children:"Upload a file"}),e.jsx("input",{id:"receipt-upload",name:"receipt-upload",type:"file",accept:"image/*,.pdf",className:"sr-only",onChange:s=>{const a=s.target.files[0];a&&n({...t,receiptFile:a})}})]}),e.jsx("p",{className:"pl-1",children:"or drag and drop"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, PDF up to 10MB"}),t.receiptFile&&e.jsxs("div",{className:"mt-2 flex items-center justify-center gap-2 text-sm text-green-600",children:[e.jsx(G,{className:"h-5 w-5"}),e.jsx("span",{children:t.receiptFile.name})]})]})}),t.paymentMethod==="cash"&&e.jsxs("div",{className:"mt-2 space-y-3",children:[e.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-xs text-blue-800",children:[e.jsx("strong",{children:"Bank Details for Deposit Transfer:"}),e.jsx("br",{}),"Maybank - ODEC UMS Beach Club",e.jsx("br",{}),"Account: 1234567890",e.jsx("br",{}),"Amount: $",f()," (10% deposit)"]})}),i&&e.jsxs("div",{className:"p-4 bg-white border-2 border-blue-300 rounded-lg",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900 mb-2 text-center",children:"Scan QR Code to Pay"}),e.jsx("img",{src:i.startsWith("http")||i.startsWith("/storage/")?i:`/storage/${i}`,alt:"Payment QR Code",className:"max-w-full h-auto mx-auto rounded",style:{maxHeight:"250px"}}),e.jsx("p",{className:"text-xs text-gray-600 text-center mt-2",children:"Scan this QR code with your banking app to pay the deposit"})]})]}),t.paymentMethod==="bank_transfer"&&e.jsxs("div",{className:"mt-2 space-y-3",children:[e.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-xs text-blue-800",children:[e.jsx("strong",{children:"Bank Details for Deposit Transfer:"}),e.jsx("br",{}),"Maybank - ODEC UMS Beach Club",e.jsx("br",{}),"Account: 1234567890",e.jsx("br",{}),"Amount: $",f()," (10% deposit)"]})}),i&&e.jsxs("div",{className:"p-4 bg-white border-2 border-blue-300 rounded-lg",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900 mb-2 text-center",children:"Scan QR Code to Pay"}),e.jsx("img",{src:i.startsWith("http")||i.startsWith("/storage/")?i:`/storage/${i}`,alt:"Payment QR Code",className:"max-w-full h-auto mx-auto rounded",style:{maxHeight:"250px"}}),e.jsx("p",{className:"text-xs text-gray-600 text-center mt-2",children:"Scan this QR code with your banking app to pay the full amount"})]})]})]})]})]}),r===5&&e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
                                    @media print {
                                        body * {
                                            visibility: hidden;
                                        }
                                        .printable-area, .printable-area * {
                                            visibility: visible;
                                        }
                                        .printable-area {
                                            position: absolute;
                                            left: 0;
                                            top: 0;
                                            width: 100%;
                                        }
                                        .no-print {
                                            display: none !important;
                                        }
                                        .print-header {
                                            display: block !important;
                                            margin-bottom: 20px;
                                            padding-bottom: 20px;
                                            border-bottom: 2px solid #000;
                                        }
                                        .security-watermark {
                                            display: block !important;
                                        }
                                        .security-border {
                                            border: 3px double #000 !important;
                                            padding: 20px !important;
                                        }
                                    }
                                    .print-header {
                                        display: none;
                                    }
                                    .security-watermark {
                                        display: none;
                                        position: fixed;
                                        top: 50%;
                                        left: 50%;
                                        transform: translate(-50%, -50%) rotate(-45deg);
                                        font-size: 120px;
                                        font-weight: bold;
                                        color: rgba(0, 0, 0, 0.05);
                                        z-index: -1;
                                        pointer-events: none;
                                        white-space: nowrap;
                                    }
                                `}),e.jsx("div",{className:"security-watermark",children:"OFFICIAL RECEIPT"}),e.jsx("div",{className:"py-8 printable-area",children:e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"print-header text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"ODEC UMS BEACH CLUB"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Official Booking System"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Activity Booking Confirmation"}),e.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["Issued: ",new Date().toLocaleString("en-MY",{timeZone:"Asia/Kuala_Lumpur",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]}),e.jsxs("div",{className:"text-center mb-8 no-print",children:[e.jsx(G,{className:"h-20 w-20 text-green-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Booking Confirmed!"}),e.jsx("p",{className:"text-gray-600",children:"Your activity booking has been successfully submitted."})]}),e.jsx("div",{className:"flex justify-end mb-4 no-print",children:e.jsxs("button",{onClick:K,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[e.jsx(pe,{className:"h-5 w-5"}),"Print Confirmation"]})}),e.jsxs("div",{className:"bg-white border-2 border-gray-300 rounded-lg p-6 mb-6 security-border",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-800 text-white p-4 -m-6 mb-6 rounded-t-lg",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-wide opacity-90",children:"Official Document"}),e.jsx("h3",{className:"text-xl font-bold mt-1",children:"Booking Confirmation"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs opacity-90",children:"Reference No."}),e.jsx("p",{className:"text-lg font-mono font-bold tracking-wider",children:o})]})]})}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx(L,{className:"h-5 w-5 text-gray-400 mr-3 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Activity"}),e.jsx("p",{className:"font-medium text-gray-900",children:t.activity?.name})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx(W,{className:"h-5 w-5 text-gray-400 mr-3 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Date"}),e.jsx("p",{className:"font-medium text-gray-900",children:t.date})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx(Y,{className:"h-5 w-5 text-gray-400 mr-3 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Participants"}),e.jsx("p",{className:"font-medium text-gray-900",children:t.participants})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx(de,{className:"h-5 w-5 text-gray-400 mr-3 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Booked By"}),e.jsx("p",{className:"font-medium text-gray-900",children:t.name})]})]})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Payment Method"}),e.jsxs("span",{className:"font-medium text-gray-900",children:[t.paymentMethod==="cash"&&"Cash on Arrival (10% Deposit)",t.paymentMethod==="bank_transfer"&&"Bank Transfer (10% Deposit)"]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-gray-300",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:"Total Booking Amount"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:["$",A()]})]}),(t.paymentMethod==="cash"||t.paymentMethod==="bank_transfer")&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center pt-2",children:[e.jsx("span",{className:"text-sm font-bold text-amber-700",children:"Amount Paid (10% Deposit)"}),e.jsxs("span",{className:"font-bold text-lg text-amber-700",children:["$",f()]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Balance Due at Check-in"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:["$",D()]})]})]})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t-2 border-dashed border-gray-300",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-700 mb-2",children:"VERIFICATION INFORMATION"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-gray-600",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Document ID:"})," ",o]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Issue Date:"})," ",new Date().toLocaleDateString("en-MY")]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"font-medium",children:"Verification:"})," This is an official booking confirmation from ODEC UMS Beach Club"]})]})]}),e.jsx("div",{className:"mt-3 p-3 bg-amber-50 border border-amber-200 rounded",children:e.jsxs("p",{className:"text-xs text-amber-900",children:[e.jsx("span",{className:"font-bold",children:"‚ö† IMPORTANT:"})," This document is for verification purposes only. Please present this confirmation along with valid identification upon arrival. Any alterations to this document will render it invalid."]})})]})]}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["A confirmation email has been sent to ",e.jsx("span",{className:"font-medium text-gray-900",children:t.email})," with all the booking details."]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["For verification inquiries, contact ODEC UMS Beach Club with reference number: ",e.jsx("span",{className:"font-mono font-semibold",children:o})]})]}),t.paymentMethod==="cash"&&e.jsx("div",{className:"bg-amber-50 border-l-4 border-amber-500 p-6 rounded-lg mb-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-6 w-6 text-amber-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsx("h3",{className:"text-base font-semibold text-amber-900 mb-2",children:"Cash on Arrival - Payment Instructions"}),e.jsxs("div",{className:"text-sm text-amber-800 space-y-3",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-amber-200",children:[e.jsx("p",{className:"font-semibold text-amber-900 mb-2",children:"Payment Breakdown:"}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Amount:"}),e.jsxs("span",{className:"font-semibold",children:["$",A()]})]}),e.jsxs("div",{className:"flex justify-between text-amber-700 bg-amber-50 p-2 rounded",children:[e.jsx("span",{className:"font-semibold",children:"Deposit Required (10%):"}),e.jsxs("span",{className:"font-bold",children:["$",f()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Remaining Balance:"}),e.jsxs("span",{className:"font-semibold",children:["$",D()]})]})]})]}),e.jsx("p",{className:"font-medium",children:"Please follow these steps:"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-2 ml-2",children:[e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold",children:"Pay Deposit:"})," Transfer the 10% deposit (",e.jsxs("span",{className:"font-bold",children:["$",f()]}),") to secure your booking",e.jsxs("div",{className:"ml-6 mt-1 text-xs bg-blue-50 p-2 rounded border border-blue-200",children:[e.jsx("p",{className:"font-semibold text-blue-900",children:"Bank Details:"}),e.jsx("p",{children:"Maybank - ODEC UMS Beach Club"}),e.jsx("p",{children:"Account: 1234567890"}),e.jsxs("p",{children:["Reference: ",o]})]})]}),e.jsx("li",{children:"Arrive at ODEC UMS Beach Club on your booking date"}),e.jsxs("li",{children:["Present your booking reference number: ",e.jsx("span",{className:"font-bold",children:o})]}),e.jsxs("li",{children:["Pay the remaining balance of ",e.jsxs("span",{className:"font-bold",children:["$",D()]})," at the reception desk"]}),e.jsx("li",{children:"Collect your receipt and enjoy your activity!"})]}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded p-3 mt-3",children:[e.jsx("p",{className:"text-xs font-semibold text-yellow-900 mb-1",children:"‚ö†Ô∏è Important:"}),e.jsxs("ul",{className:"text-xs text-yellow-800 space-y-1 ml-4 list-disc",children:[e.jsx("li",{children:"Deposit must be paid within 24 hours to confirm your booking"}),e.jsx("li",{children:"Receipt has been uploaded with your booking"}),e.jsx("li",{children:"Please arrive at least 15 minutes before your scheduled time"})]})]})]})]})]})}),t.paymentMethod==="bank_transfer"&&e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-6 rounded-lg mb-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-6 w-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})})}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsx("h3",{className:"text-base font-semibold text-blue-900 mb-2",children:"Bank Transfer - Payment Instructions"}),e.jsxs("div",{className:"text-sm text-blue-800 space-y-3",children:[e.jsx("p",{className:"font-medium",children:"Please transfer the deposit amount to:"}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-blue-200 space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Bank Name:"}),e.jsx("span",{className:"font-semibold",children:"Maybank"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Account Name:"}),e.jsx("span",{className:"font-semibold",children:"ODEC UMS Beach Club"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Account Number:"}),e.jsx("span",{className:"font-semibold",children:"1234567890"})]}),e.jsxs("div",{className:"flex justify-between border-t pt-2",children:[e.jsx("span",{className:"text-gray-600",children:"Deposit Amount (10%):"}),e.jsxs("span",{className:"font-bold text-lg text-blue-600",children:["$",f()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Reference:"}),e.jsx("span",{className:"font-semibold",children:o})]})]}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded p-3",children:[e.jsx("p",{className:"text-xs font-semibold text-yellow-900 mb-1",children:"‚ö†Ô∏è Important:"}),e.jsxs("ul",{className:"text-xs text-yellow-800 space-y-1 ml-4 list-disc",children:[e.jsxs("li",{children:["Include your booking reference number ",e.jsx("span",{className:"font-bold",children:o})," in the transfer description"]}),e.jsx("li",{children:"Receipt has been uploaded with your booking"}),e.jsxs("li",{children:["Pay remaining balance of ",e.jsxs("span",{className:"font-bold",children:["$",D()]})," at check-in"]})]})]})]})]})]})}),e.jsxs("div",{className:"flex gap-4 justify-center no-print",children:[e.jsx("button",{onClick:()=>window.location.href="/book-activity",className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-medium",children:"Make Another Booking"}),e.jsx("button",{onClick:()=>window.location.href="/my-bookings",className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium",children:"View My Bookings"})]})]})})]}),r<5&&e.jsxs("div",{className:"flex justify-between mt-8 pt-6 border-t border-gray-200",children:[e.jsx("button",{onClick:R,disabled:r===1,className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Back"}),e.jsx("button",{onClick:r===4?X:S,disabled:r===2&&(!t.date||!t.time)||r===3&&(!t.phone||!t.participants)||r===4&&(!t.paymentMethod||(t.paymentMethod==="cash"||t.paymentMethod==="bank_transfer")&&!t.receiptFile),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:r===4?"Confirm Booking":"Next"})]})]})]})}),e.jsx(je,{isOpen:F,onClose:()=>{m(!1),k(null)},imageUrl:T?.vr_tour_image,activityName:T?.name})]})}export{Be as default};
